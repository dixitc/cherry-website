<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cherry</title>
    <link href='https://fonts.googleapis.com/css?family=Roboto:400,100,700,100italic,300,300italic,400italic,500,500italic,700italic,900,900italic' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="libs/slick/slick/slick.css" />
    <link rel="stylesheet" type="text/css" href="libs/intro/introjs.min.css" />
    <link rel="stylesheet" type="text/css" href="libs/intro/introjs-rtl.css" />
    <link rel="stylesheet" type="text/css" href="libs/slick/slick/slick-theme.css" />
    <link rel="stylesheet" type="text/css" href="css/slick-test.css">
</head>

<body>
    <header>
        <nav>
            <div id="headerTitle">
                <span>
                    </span> cherry
            </div>

        </nav>
    </header>
    <div class="sectionScroller">
        <section id="feature0">

            <div class='mobileOverlay'>
                <div id="mobile" class="slickMobile content ">
                    <div>
                        <img class="screenImage" src="assets/images/cherry-screen-1.png">
                    </div>
                    <div>
                        <img class="screenImage" src="assets/images/cherry-screen-2.png">
                    </div>
                    <div>
                        <img class="screenImage" src="assets/images/cherry-screen-3.png">
                    </div>
                    <div>
                        <img class="screenImage" src="assets/images/cherry-screen-4.png">
                    </div>
                    <div>
                        <img class="screenImage" src="assets/images/cherry-screen-5.png">
                    </div>
                    <div>
                        <img class="screenImage" src="assets/images/cherry-screen-6.png">
                    </div>
                </div>
            </div>
            <div class="scroller">
                <div class="inner-scroll-feature" style="background:red"></div>
                <div class="inner-scroll-feature" style="background:blue"></div>
                <div class="inner-scroll-feature" style="background:green"></div>
                <div class="inner-scroll-feature" style="background:yellow"></div>
            </div>



        </section>
        <div id="scrollDownContainer">
            <div class="center" onclick="slickNext()">
                <img id="scrollDownElement" src="assets/images/scroll-down.png">
            </div>
        </div>
        <section id="feature1">
            <div class="videoOverlay" id="brand">

            </div>
            <div class="troller">
                <div class="inner-scroll-feature" style="background:red"></div>
                <div class="inner-scroll-feature" style="background:blue"></div>
                <div class="inner-scroll-feature" style="background:green"></div>
                <div class="inner-scroll-feature" style="background:yellow"></div>
            </div>
            <div class="feature-wrapper">

            <div class="intro-feature intro1" data-step="1" data-intro="feature 1 is awesome" data-position="right">

            </div>
            <div class="intro-feature intro2"  data-step="2" data-intro="feature 2 is also awesome" data-position="left">

            </div>
          </div>
          <div class="feature-wrapper">

          <div class="intro-feature intro3" data-step="3" data-intro="feature 3 is pretty cool" data-position="right">

          </div>
          <div class="intro-feature intro4"  data-step="4" data-intro="feature 4 is epic" data-position="left">

          </div>
        </div>



        </section>
        <section id="feature2">
            <div class="videoOverlay" id="brand">

            </div>
        </section>
        <section id="feature3">
            <div class="videoOverlay" id="brand">

            </div>
        </section>
        <section id="feature4">
            <div class="videoOverlay" id="brand">
                <div id="text">

                </div>
        </section>


        </div>
</body>
<script type="text/javascript" src="libs/jquery.min.js"></script>
<script type="text/javascript" src="libs/intro/intro.min.js"></script>
<script type="text/javascript" src="libs/slick/slick/slick.min.js"></script>
<script type="text/javascript">
    var baloon = $('#scrollDownContainer');

    function runIt() {
        baloon.animate({
            bottom: '+=15'
        }, 400);
        baloon.animate({
            bottom: '-=15'
        }, 400, runIt);
    }


    window.requestAnimationFrame(runIt);

    $(document).ready(function() {
        var position = 0;
        var page = 0;
        $('html, body').animate({
            scrollTop: $("#feature" + 0).offset().top
        }, 500);

        $('.scroller').slick({
            autoplay: false,
            autoplaySpeed: 2000,
            draggable: true,
            vertical: true,
            dots: true,
            adaptiveHeight : true,
            arrows: true

        });

        $('.slickMobile').slick({
            autoplay: false,
            autoplaySpeed: 2000,
            draggable: true,
            infinite: false,
            dots: true,
            arrows: true

        });

        var start = 0;
        var intro = introJs();
        $(function() {

            $(window).bind('wheel', function(event, delta) {
                var scroll = $(window).scrollTop();
                console.log('page ' + page);
                console.log('start '+start);
                if (event.originalEvent.deltaY > 0) {

                    if (page == 0) {

                        $('.scroller').slick('slickNext');
                    } else if (page == 1) {


                 if(start < 3){
                          start++;
                          intro.nextStep();

                        } else {


intro.exit();

                          $('.slickMobile').slick('slickNext');
                            //$('.introjs-button.introjs-nextbutton').click()
                        }
                        //$('.troller').slick('slickNext');
                    } else {
                        $('.slickMobile').slick('slickNext');
                    }
                    //$('.slickMobile').slick('slickNext');
                } else {
                    if (page == 0) {


                        $('.scroller').slick('slickPrev');
                    } else if (page == 1) {
                        if(start == 0){
                          intro.exit();
                            $('.slickMobile').slick('slickPrev');
                            $('.scroller')[0].slick.slickGoTo(parseInt(3));
                        }else{
                          intro.previousStep();
                          start--;
                        }
                        //$('.troller').slick('slickPrev');
                    } else {

                        $('.slickMobile').slick('slickPrev');

                    }
                }



            });
        });


        $('.scroller').on('beforeChange', function(event, slick, currentSlide, nextSlide) {


            if (currentSlide == 3 && nextSlide == 0) {
                $('.slickMobile').slick('slickNext');
                start++;
              //  intro.start();
          //      $('.troller')[0].slick.slickGoTo(parseInt(0));

            }
        })

$('.slickMobile').on('afterChange' , function (event ,slick , currentSlide ) {
  console.log('afterChange');
  console.log('currentSlide '+currentSlide);
  console.log(event);
  if (setIntro == 2) {

    intro.start();
    setIntro = 0;
    start = 0;
  }else if(setIntro == 1){
    intro.goToStep(3).start();
    setIntro = 0;
    start = 3;
  }
})
var setIntro = 0;
        // On before slide change
        $('.slickMobile').on('beforeChange', function(event, slick, currentSlide, nextSlide) {
            if (currentSlide > nextSlide) {
                page--;
                if(nextSlide == 1){
                  setIntro = 1;
                }
            } else {
              if(nextSlide == 1){
                setIntro = 2;
              }
                page++;
            }



            if (nextSlide == 5) {
                $('#mobile').css('visibility', 'hidden');
            } else {
                $('#mobile').css('visibility', 'visible');
                if (nextSlide == 1) {
                    $('video').css("-webkit-filter", "grayscale(1) brightness(1.2) contrast(1.05)")
                } else if (nextSlide == 2) {
                    $('video').css("-webkit-filter", "sepia(0.5) hue-rotate(-30deg) saturate(1.2) contrast(0.8)")

                } else if (nextSlide == 3) {
                    $('video').css("-webkit-filter", "sepia(0.4) saturate(2.5) hue-rotate(-30deg) contrast(0.67)")

                }
            }


            if ($("#feature" + nextSlide)[0]) {

                $('html, body').animate({
                    scrollTop: $("#feature" + nextSlide).offset().top,
                }, 500);
            }
        });
    });
</script>

</html>
